<app-loading *ngIf="isLoading$ | async; else notLoading"></app-loading>

<ng-template #notLoading>
  <h2 mat-dialog-title translate>
    secured.projects.dialogs.web-pages-detail.title-new
  </h2>

  <mat-dialog-content>
    <form [formGroup]="form" fxLayout="column" fxLayoutGap="32px">
      <mat-form-field appearance="outline" floatLabel="always">
        <mat-label translate>secured.projects.fields.name.label</mat-label>
        <input matInput type="text" formControlName="name">
      </mat-form-field>

      <mat-form-field appearance="outline" floatLabel="always">
        <mat-label translate>secured.projects.fields.url.label</mat-label>
        <input matInput type="text" formControlName="originSite">
      </mat-form-field>

      <mat-form-field appearance="outline" floatLabel="always" fxFlex>
        <mat-label translate>secured.projects.fields.billing-profile.label</mat-label>
        <mat-select formControlName="billingProfile">
          <mat-option *ngFor="let billingProfile of billingProfiles" [value]="billingProfile">
            <strong>{{ billingProfile.companyName || (billingProfile.firstName + ' ' + billingProfile.lastName) }}</strong>
            <span>&nbsp;-&nbsp;{{ billingProfile.address | appFormatAddress }}&nbsp;-&nbsp;</span>
            <span>{{ billingProfile.currency }}</span>
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline" floatLabel="always" fxFlex>
        <mat-label translate>secured.projects.fields.pricing-tier.label</mat-label>
        <mat-select formControlName="pricingTier">
          <mat-option *ngFor="let pricingTier of pricingTiers" [value]="pricingTier">
            <strong>{{ ('secured.enums.pricing-tier.' + pricingTier.code) | translate }}</strong>
            <span>&nbsp;-&nbsp;{{ pricingTier.annualPrice }}&nbsp;€</span>
            <span>&nbsp;/&nbsp;{{ pricingTier.monthlyPrice }}&nbsp;€</span>
          </mat-option>
        </mat-select>
        <mat-hint translate>secured.projects.fields.pricing-tier.note</mat-hint>
      </mat-form-field>
    </form>
  </mat-dialog-content>

  <mat-dialog-actions fxLayoutAlign="end center">
    <button mat-button [mat-dialog-close]="">
      <span translate>secured.core.buttons.cancel</span>
    </button>
    <button mat-flat-button [disabled]="form.invalid" color="primary" (click)="onSubmit(form.value)">
      <span translate>secured.core.buttons.create</span>
    </button>
  </mat-dialog-actions>
</ng-template>


